<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css.css/syatyo.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="js/hira.js"></script>
    <title>社長ステージ</title>
</head>

<body>


    <!--左の吹き出し-->
    <div class="talking">
        <figure class="talking-left_icon">
            <img src="img/fukidasi/syatyo.jpeg" alt="代替テキスト">
            <figcaption>社長</figcaption>
        </figure>
        <div class="talking-left">
            <p>君が今回僕の家を建ててくれる、ワリオ君だね。</p>
            <p>では早速作っておくれ‼︎</p>
        </div>
    </div>
    <!--左の吹き出し終わり-->

    <!--右の吹き出し-->
    <div class="talking" id="choose_meterial">
        <figure class="talking-right_icon">
            <img src="img/fukidasi/wario.jpeg" alt="代替テキスト">
            <figcaption>ワリオ親方</figcaption>
        </figure>
        <div class="talking-right">
            <p>ガッハッハ！今回の家は社長の家だからいつもより豪華に作ってやるぜ！</p>
            <input type="button" value="和式" onclick="choosedMeterial1()" id="high_wood">
            <input type="button" value="洋式" onclick="choosedMeterial2()" id="low_wood">
        </div>
    </div>
    <!--右の吹き出し終わり-->

    <!--右の吹き出し-->
    <div class="talking" id="choose_method" style.display="none">
        <figure class="talking-right_icon">
            <img src="img/fukidasi/wario.jpeg" alt="代替テキスト">
            <figcaption>ワリオ親方</figcaption>
        </figure>
        <div class="talking-right">
            <p>ガッハッハ！次は建て方を選んでくれ！</p>
            <input type="button" value="真面目に作る" onclick="choosedMethod1()" id="make_serious">
            <input type="button" value="ワリオ親方の好きにして‼︎" onclick="choosedMethod2()" id="make_yourself">

        </div>
    </div>
    <!--右の吹き出し終わり-->

    <div>
        <img id="home" class="hidden">
    </div>

    <div id="loading" class="hidden">
        <img src="img/hous/roding.gif">
    </div>

        <div class="backbutton">
            <a href="wario.html">Top</a>
        </div>
    

    <script>    // 0から4までのどれかを表示
        const choose_meterial = document.getElementById("choose_meterial");
        const choose_method = document.getElementById("choose_method");
        const loading = document.getElementById("loading");
        const home = document.getElementById("home");
        const high_wood = document.getElementById("high_wood");
        const low_wood = document.getElementById("low_wood");
        const make_serious = document.getElementById("make_serious");
        const make_yourself = document.getElementById("make_yourself");
        const my_audio = new Audio("daiku.mp3")

        let random_num1, random_num2, random_num3, random_num4

        function choosedMeterial1() {
            random_num1 = Math.floor(Math.random() * 5);
            console.log(random_num1);
            choose_method.style.display = "block";
            high_wood.disabled = true;
            low_wood.disabled = true;
        }

        function choosedMeterial2() {
            random_num2 = Math.floor(Math.random() * 5);
            console.log(random_num2);
            choose_method.style.display = "block";
            high_wood.disabled = true;
            low_wood.disabled = true;
        }

        function choosedMethod1() {
            random_num3 = Math.floor(Math.random() * 5);
            console.log(random_num3);
            loading.style.display = "block";
            make_serious.disabled = true;
            make_yourself.disabled = true;
            createHome();
            my_audio.currentTime = 0; //再生位置を先頭に戻す
            my_audio.play(); //サウンドを再生
        }

        function choosedMethod2() {
            random_num4 = Math.floor(Math.random() * 5);
            console.log(random_num4);
            loading.style.display = "block";
            make_serious.disabled = true;
            make_yourself.disabled = true;
            createHome();
            my_audio.currentTime = 0; //再生位置を先頭に戻す
            my_audio.play(); //サウンドを再生
        }

        async function createHome() {
            await sleep(3000);
            loading.style.display = "none";
            home.style.display = "block";
            if (random_num1 < 5 && random_num4 === 4) {
                console.log('和式大成功');
                home.src = 'img/hous/pichi.webp'
            } else if (random_num2 < 5 && random_num4 === 4) {
                console.log('洋式大成功');
                home.src = 'img/hous/pichi.webp'
            } else if (random_num1 < 5 && random_num4 < 4) {
                console.log('和式成功');
                home.src = 'img/hous/kinkakuzi.jpeg'
            } else if (random_num2 < 5 && random_num4 < 4 ){
                console.log('洋式成功');
                home.src = 'img/hous/tazimaharu.jpeg'
            } else if (random_num1 < 5 && random_num3 < 5) {
                console.log('和式普通');
                home.src = 'img/hous/ginkakuzi.jpeg'
            } else if (random_num2 < 5 && random_num3 < 5) {
                console.log('洋式普通');
                home.src = 'img/hous/yoshikibest.jpeg'
            } 
        }


        const sleep = ms => new Promise(res => setTimeout(res, ms))
    </script>
</body>

</html>